DDD学習ガイド（『ドメイン駆動設計 モデリング/実装ガイド V1.0.3』ベース）

目的
- モデリング（ユースケース図/ドメインモデル図/オブジェクト図）→実装（ドメイン/ユースケース/インフラ）への橋渡しを段階的に習得
- アーキテクチャ（オニオン/レイヤー）と戦術的設計を接続し、変更に強い実装へ

前提資料
- docs/ドメイン駆動設計_モデリング_実装ガイド_V1.0.3.pdf.md
- 参考: docs/ドメイン駆動設計サンプルコード_FAQ_V1.0.1.md

進め方（2–4週間想定）
Week 0: 目的と用語（0.5日）
- 読む: 第1章（DDD概要、モデル、アプローチ）
- 成果: DDDの目的/用語を1ページに要約（リポジトリに保存）

Week 1: モデリング（図の作り方）
- 読む: 第2章 2.1（ユースケース図/ドメインモデル図/オブジェクト図）
- 演習1: 題材を決め、ユースケース図→オブジェクト図→ドメインモデル図（集約境界/多重度/ルール）を作成
- 成果: 図（PNGまたはtext/PlantUML）。用語の日本語↔英語対訳を併記

Week 2: ドメイン実装（貧血→リファクタ）
- 読む: 第2章 2.2（ドメイン貧血→知識をオブジェクトへ移譲）/ 2.3 基本方針
- 演習2: 
  - v1: セッター多用の貧血モデルでまず動かす
  - v2: エンティティ（create/reconstruct/ミューテーション）、値オブジェクト化、セッター排除
- 成果: 変更差分/テスト（境界値/状態遷移）

Week 3: 集約とユースケース/レイヤー
- 読む: 第3章 3.1（集約）/ 第5章 5.2〜5.3（レイヤード/オニオン）
- 演習3:
  - 集約ルート単位のリポジトリIF（ドメイン層）とオンメモリ実装（インフラ層）
  - ユースケースはWhatに集中（DTOを戻す）
- 成果: 集約単位で取得/更新する実装＋ユースケースのユニットテスト

Week 4: プレゼンテーション/CQRS/例外（軽量）
- 読む: 第8章（CQRS 概論）/ 第9〜10章（プレゼン/例外/言語・ライブラリ）
- 演習4:
  - クエリモデル（DTO）とクエリサービス（ユースケース層IF→インフラ実装）
  - 例外方針：ドメイン例外→プレゼン層でハンドリング
- 成果: 一覧/詳細の参照用ユースケース、更新ユースケースとのテスト

実装の原則（抜粋）
- ドメイン知識はドメイン層へ（ユースケースやインフラに散らさない）
- 常に正しいインスタンスのみを存在させる（生成/ミューテーションの制御、セッター禁止）
- リポジトリは集約単位で入出力（Listアナロジー）。Howはインフラに閉じ込める
- ユースケースはドメインの公開操作を組み合わせる（What）。戻り値はDTO

チェックリスト
- [ ] ユースケース図/オブジェクト図/ドメインモデル図が同期している
- [ ] 集約境界・多重度・ルール/制約が明記されている
- [ ] エンティティ/値オブジェクト化、セッター排除、create/reconstruct整備
- [ ] リポジトリIFはドメイン層、実装はインフラ層（依存逆転）
- [ ] ユースケースはDTOで返す（表示の書式はプレゼン層）
- [ ] クエリモデルはユースケース層の型、Howはインフラ層
- [ ] テストはユースケース中心＋ドメイン境界値/状態遷移

成果物
- 図一式（ユースケース/オブジェクト/ドメインモデル）
- src/domain: エンティティ/値オブジェクト/リポジトリIF
- src/usecase: ユースケース/DTO/クエリサービスIF
- src/infrastructure: リポジトリ/クエリサービス実装（オンメモリ→差し替え可能）
- test/**: ドメイン/ユースケース/必要に応じてインフラ結合
